# TopicRank 文档压缩思路

**TopicRank** 是基于主题的文档压缩方法，通过将文档中的候选关键词聚合为语义相似的主题，然后基于主题的排序确定关键词的重要性。通过提取每个主题的代表词来生成最终的关键词。下面将分别展示 **带Query** 和 **不带Query** 情况下的文档压缩思路。

## 1. 带Query的文档压缩

带有用户查询（**Query**）的文档压缩，意味着我们不仅关注文档本身的内容，还需要根据用户查询的相关性来进行文档压缩。具体步骤如下：

### a. 对Query分词

- 将用户输入的查询（**Query**）进行分词。分词的粒度可以是单词、短语或特定的实体（例如，名词短语）。
- 对Query进行处理，得到一组候选关键词。

### b. 对文档进行分块

- 将文档分成多个块（例如：段落、句子或固定长度的文本片段）。每个块会被赋予一个唯一的序号。
- 这些分块将作为后续主题建模的输入。

### c. 对每个分块进行分词

- 对文档的每个分块进行分词处理，提取出每个分块中的关键词。通常，候选关键词可以通过 **TF-IDF**、**TextRank** 或 **BM25** 等方法提取。

### d. 主题建模：将关键词聚合为主题

- 使用 **LDA** 或其他主题建模方法（如 **LSA**）将每个分块中的关键词聚合为多个主题。
- 主题中的关键词将根据其共现关系被聚合到同一个主题中。

### e. 构建以主题为节点的图

- 将每个主题作为图中的节点，主题之间的边权重根据共现关系（如主题间的词汇重叠程度）来计算。
- 可以使用 **余弦相似度** 或其他相似性度量来构建边权重。

### f. 基于主题的排序（结合Query）

- 使用 **PageRank** 或 **HITS** 等图排序算法对主题进行排序。
- 在排序过程中，可以结合 **Query** 的关键词，调整每个主题的权重。例如，如果某个主题包含与 **Query** 关键词高度相关的词汇，则该主题的重要性得分较高。

### g. 提取与Query相关的TOP-N主题

- 根据 **PageRank** 或 **HITS** 的排序结果，从所有主题中选择最相关的 **TOP-N** 个主题。**TOP-N** 代表与 **Query** 最相关的主题数量。
- 选择这些主题时，可以考虑与 **Query** 的重叠度，确保所选的主题能有效覆盖 **Query** 的核心内容。

### h. 通过主题中的代表词提取最终关键词

- 从每个选中的主题中提取出 **代表性关键词**，通常选择该主题中权重较高的词汇。
- 将每个主题的代表性关键词结合起来，形成最终的关键词集，这些关键词代表了文档的核心信息，同时与用户的 **Query** 紧密相关。

### i. 文档压缩

- 根据选中的 **TOP-N** 主题，压缩文档中不相关的部分，仅保留与 **Query** 相关的部分。
- 对压缩后的文档进行重新排序，确保文档的逻辑结构得以保留。

---

## 2. 不带Query的文档压缩

不带 **Query** 的文档压缩只关注文档本身的内容，而不涉及用户查询的相关性。具体步骤如下：

### a. 对文档进行分块

- 将文档划分为多个块（段落、句子或固定长度的文本片段）。每个块会被赋予一个唯一的序号。

### b. 对每个分块进行分词

- 对文档的每个分块进行分词，提取出每个分块中的关键词，通常使用 **TF-IDF**、**TextRank** 或 **BM25** 等方法。

### c. 主题建模：将关键词聚合为主题

- 使用 **LDA** 或其他主题建模方法（如 **LSA**）将每个分块中的关键词聚合为多个主题。
- 每个主题由一组语义相关的关键词组成。

### d. 构建以主题为节点的图

- 将每个主题作为图中的一个节点，并根据词汇共现关系计算主题间的边权重。
- 边的权重可以使用 **余弦相似度** 或 **Jaccard相似度** 等度量来表示主题之间的相似性。

### e. 基于主题的排序

- 使用 **PageRank** 或 **HITS** 等图排序算法对主题进行排序。
- 排序的依据是主题的整体重要性，通常通过主题间的连接关系和共现的关键词来计算。

### f. 提取重要的TOP-N主题

- 根据 **PageRank** 或 **HITS** 排序结果，选择最重要的 **TOP-N** 个主题， **TOP-N** 代表选定的主题数量。
- 这些主题将是文档中最具代表性和重要性的部分。

### g. 通过主题中的代表词提取最终关键词

- 对每个主题中的代表性关键词进行提取，通常选择该主题中权重较高的词汇。
- 将所有主题的代表性关键词合并起来，形成最终的关键词集。

### h. 文档压缩

- 根据选中的 **TOP-N** 主题，仅保留文档中与这些主题相关的部分。
- 对剩余部分进行压缩，只保留能够有效表达主题和文档核心内容的部分。
- 文档的压缩可以通过去除冗余信息、精简部分内容来实现，同时保持文档的逻辑结构。

---

## 总结

### 带Query的文档压缩：
1. **Query** 分词；
2. 根据 **Query** 的相关性排序主题；
3. 提取与 **Query** 最相关的 **TOP-N** 主题；
4. 从主题中提取代表性关键词并进行文档压缩。

### 不带Query的文档压缩：
1. 根据文档内容进行关键词提取；
2. 聚合关键词为语义相关的主题；
3. 对主题进行排序，提取 **TOP-N** 主题；
4. 提取代表性关键词并进行文档压缩。

**TopicRank** 方法通过将文档中的关键词聚合为主题，结合主题的重要性进行排序，最终选出最具代表性的关键词进行文档压缩。对于带 **Query** 的情况，主题的选择和排序过程会受到用户查询的影响，从而使压缩结果更加符合用户需求；而在不带 **Query** 的情况下，主题选择和排序更注重文档自身内容的内在结构。